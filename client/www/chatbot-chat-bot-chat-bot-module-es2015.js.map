{"version":3,"sources":["./src/app/chatbot/chat-bot/chat-bot.page.html","./src/app/chatbot/chat-bot/chat-bot-routing.module.ts","./src/app/chatbot/chat-bot/chat-bot.module.ts","./src/app/chatbot/chat-bot/chat-bot.page.scss","./src/app/chatbot/chat-bot/chat-bot.page.ts"],"names":[],"mappings":"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","file":"chatbot-chat-bot-chat-bot-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-title>AI-Trò chuyên với máy</ion-title>\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-item lines=\\\"none\\\" class=\\\"idea-created\\\">\\n    <ion-avatar slot=\\\"start\\\">\\n      <img src=\\\"{{chatbot?.avatar}}\\\">\\n    </ion-avatar>\\n    <ion-label class=\\\"ion-text-wrap\\\">\\n      <strong slot=\\\"start\\\">\\n        {{chatbot?.username}}\\n      </strong>\\n      <br>\\n      {{chatbot?.fullname}}\\n      <br>\\n      <ion-note>{{chatbot?.created_time | timeAgo}}</ion-note>\\n    </ion-label>\\n    <ion-button (click)=\\\"onClickMore($event)\\\" slote=\\\"end\\\" shape=\\\"round\\\" fill=\\\"clear\\\" size=\\\"small\\\">\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"ios-more\\\"></ion-icon>\\n    </ion-button>\\n  </ion-item>\\n\\n\\n\\n  <!-- Nhập nội dung câu hỏi yêu cầu cho máy -->\\n  <ion-card *ngIf=\\\"!isRepairing\\\" class=\\\"input-comment\\\">\\n    <ion-item lines=\\\"none\\\">\\n      <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"{{(userInfo?.avatar?userInfo.avatar:'assets/imgs/avatar.jpg')}}\\\">\\n      </ion-avatar>\\n      <ion-textarea autosize type=\\\"text\\\" placeholder=\\\"Bạn có yêu cầu gì?\\\" [(ngModel)]=\\\"message\\\"\\n        (keyup.enter)=\\\"keyInput()\\\">\\n      </ion-textarea>\\n      <ion-button color=\\\"{{(message?'secondary':'light')}}\\\" (click)=\\\"onClickSend()\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"send\\\"></ion-icon>\\n      </ion-button>\\n    </ion-item>\\n  </ion-card>\\n\\n  <!-- Lịch sử chatbot ở đây -->\\n  <ion-list class=\\\"comment-list\\\">\\n    <!-- Hiển thị khi người dùng vừa gõ enter gửi đi máy chủ chưa trả lời -->\\n    <div *ngIf=\\\"!conversion?.response && !isRepairing && conversion?.request\\\">\\n      <ion-item lines=\\\"none\\\">\\n        <ion-avatar slot=\\\"end\\\">\\n          <img src=\\\"{{(userInfo?.avatar?userInfo.avatar:'assets/imgs/avatar.jpg')}}\\\">\\n        </ion-avatar>\\n        <ion-label class=\\\"ion-text-wrap user-backgound\\\">\\n          <strong slot=\\\"start\\\">\\n            {{userInfo?.fullname}}\\n          </strong>\\n          <br>\\n          <ion-label class=\\\"ion-text-wrap\\\">\\n            <div [innerHTML]=\\\"conversion.request | newline | safe\\\"></div>\\n          </ion-label>\\n        </ion-label>\\n      </ion-item>\\n      <ion-note [style.padding-left]=\\\"'100px'\\\"> {{conversion?.created_time | timeAgo}} </ion-note>\\n    </div>\\n\\n    <!-- Nhập nội dung trả lời sửa lại -->\\n    <ion-card *ngIf=\\\"isRepairing\\\" class=\\\"input-train\\\">\\n\\n      <!-- Nút đóng không chỉnh sửa nằm ở góc trái trên cùng -->\\n      <div class='close-button' tappable>\\n\\t\\t\\t\\t<ion-icon slot=\\\"icon-only\\\" name=\\\"close\\\" color=\\\"danger\\\" (click)=\\\"onClickClose()\\\"></ion-icon>\\n      </div>\\n\\n      <ion-item color=\\\"primary\\\">\\n        <ion-label color=\\\"light\\\">DẠY CHO MÁY:</ion-label>\\n      </ion-item>\\n\\n      <!-- Hiển thị lại nội dung câu hỏi của bạn -->\\n      <ion-item>\\n        <ion-avatar slot=\\\"end\\\">\\n          <img src=\\\"{{(userInfo?.avatar?userInfo.avatar:'assets/imgs/avatar.jpg')}}\\\">\\n        </ion-avatar>\\n        <ion-label class=\\\"ion-text-wrap user-backgound\\\">\\n          <strong slot=\\\"start\\\">\\n            {{userInfo?.fullname}}\\n          </strong>\\n          <br>\\n          <ion-label class=\\\"ion-text-wrap\\\">\\n            <div [innerHTML]=\\\"conversion?.request | newline | safe\\\"></div>\\n          </ion-label>\\n        </ion-label>\\n      </ion-item>\\n\\n      <!-- Lựa chọn ý định hoặc nhập ý định -->\\n      <ion-item class=\\\"background-item-round\\\">\\n        <ion-icon slot=\\\"start\\\" color=\\\"primary\\\" name=\\\"logo-reddit\\\"></ion-icon>\\n        <ion-label position=\\\"stacked\\\" class=\\\"ion-text-wrap\\\" color=\\\"{{(conversion.invalid?'danger':'')}}\\\"\\n          style=\\\"text-align: justify;\\\">\\n          Ý định này là gì?(*)\\n        </ion-label>\\n        <ion-input type=\\\"text\\\" placeholder=\\\"Nhập ý định\\\" [(ngModel)]=\\\"conversion.intent_name\\\"></ion-input>\\n      </ion-item>\\n\\n      <!-- Nhập câu trả lời -->\\n      <ion-item>\\n        <ion-label class=\\\"form-title-item\\\" color=\\\"tertiary\\\">Câu trả lời dạy cho máy (*):</ion-label>\\n      </ion-item>\\n      <ion-item class=\\\"background-item-round\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <img src=\\\"{{chatbot?.avatar}}\\\">\\n        </ion-avatar>\\n        <ion-textarea autosize type=\\\"text\\\" placeholder=\\\"Nhập câu trả lời\\\" color=\\\"{{(conversion?.response?'':'danger')}}\\\"\\n          [(ngModel)]=\\\"conversion.response\\\">\\n        </ion-textarea>\\n        <ion-button color=\\\"{{(conversion?.response?'danger':'light')}}\\\" (click)=\\\"onClickRepair()\\\" fill=\\\"clear\\\"\\n          shape=\\\"round\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"save\\\"></ion-icon>\\n        </ion-button>\\n      </ion-item>\\n\\n\\n\\n    </ion-card>\\n\\n    <!-- Khi máy chủ trả lời thì mặt nhiên nó sẽ ẩn đi và thông tin trả lời đã hiển thị ở mảng rồi -->\\n    <div *ngFor=\\\"let comment of conversations\\\">\\n\\n      <div *ngIf=\\\"comment?.response && (!isRepairing || conversion.created_time !== comment.created_time)\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-avatar slot=\\\"start\\\">\\n            <img src=\\\"{{chatbot?.avatar}}\\\">\\n          </ion-avatar>\\n          <ion-label class=\\\"ion-text-wrap bot-backgound\\\">\\n            <strong slot=\\\"start\\\">\\n              {{chatbot?.username}}\\n            </strong>\\n            <br>\\n            <ion-label class=\\\"ion-text-wrap\\\">\\n              <div [innerHTML]=\\\"comment.response | newline | safe\\\"></div>\\n            </ion-label>\\n          </ion-label>\\n          <!-- Nút này chỉ xuất hiện ở câu chat cuối thôi nhé -->\\n          <ion-button *ngIf=\\\"conversion.created_time === comment.created_time\\\" (click)=\\\"onClickRepair()\\\" slote=\\\"end\\\"\\n            shape=\\\"round\\\" fill=\\\"clear\\\" size=\\\"small\\\">\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"{{isRepairing?'save':'ios-create'}}\\\"\\n              color=\\\"{{isRepairing?'danger':'secondary'}}\\\"></ion-icon>\\n          </ion-button>\\n        </ion-item>\\n      </div>\\n\\n      <div *ngIf=\\\"comment?.request && (!isRepairing || conversion.created_time !== comment.created_time)\\\">\\n        <ion-item lines=\\\"none\\\">\\n          <ion-avatar slot=\\\"end\\\">\\n            <img src=\\\"{{(userInfo?.avatar?userInfo.avatar:'assets/imgs/avatar.jpg')}}\\\">\\n          </ion-avatar>\\n          <ion-label class=\\\"ion-text-wrap user-backgound\\\">\\n            <strong slot=\\\"start\\\">\\n              {{userInfo?.fullname}}\\n            </strong>\\n            <br>\\n            <ion-label class=\\\"ion-text-wrap\\\">\\n              <div [innerHTML]=\\\"comment.request | newline | safe\\\"></div>\\n            </ion-label>\\n          </ion-label>\\n        </ion-item>\\n        <ion-note [style.padding-left]=\\\"'100px'\\\"> {{comment.created_time | timeAgo}} </ion-note>\\n      </div>\\n    </div>\\n  </ion-list>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ChatBotPage } from './chat-bot.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ChatBotPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ChatBotPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ChatBotPageRoutingModule } from './chat-bot-routing.module';\n\nimport { ChatBotPage } from './chat-bot.page';\nimport { SharedModule } from 'src/app/shared.module';\nimport { Ngxi4DynamicServiceModule } from 'ngxi4-dynamic-service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    Ngxi4DynamicServiceModule,\n    ChatBotPageRoutingModule\n  ],\n  declarations: [ChatBotPage]\n})\nexport class ChatBotPageModule {}\n","export default \".file-over {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 2;\\n  width: 100%;\\n  height: 100%;\\n  opacity: 0;\\n  cursor: pointer;\\n}\\n\\n.idea-created {\\n  border-radius: 2em;\\n  opacity: 0.9;\\n  margin: 5px;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 1px;\\n}\\n\\n.background-item-round {\\n  margin: 3px;\\n  border-radius: 1.5em;\\n}\\n\\n.input-comment {\\n  border-radius: 2em;\\n  opacity: 0.9;\\n  margin: 15px;\\n  border-style: solid;\\n  border-color: green;\\n  border-width: 1px;\\n  box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.5);\\n}\\n\\n.input-train {\\n  position: relative;\\n  border-radius: 2em;\\n  opacity: 0.9;\\n  margin: 15px;\\n  border-style: solid;\\n  border-color: red;\\n  border-width: 1px;\\n  box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.5);\\n}\\n\\n.input-train .close-button {\\n  position: absolute;\\n  z-index: 99;\\n  top: 0%;\\n  left: 90%;\\n  font-size: 45px;\\n}\\n\\n.bot-backgound {\\n  position: relative;\\n  margin-right: 10px;\\n  min-width: 10px;\\n  border-radius: 1em;\\n  opacity: 0.9;\\n  padding: 8px;\\n  background-color: #E5E4E9;\\n  color: #363636;\\n}\\n\\n.user-backgound {\\n  margin-left: 40px;\\n  min-width: 10px;\\n  border-radius: 1em;\\n  opacity: 0.7;\\n  padding: 8px;\\n  background-color: #2095FE;\\n  color: #fff;\\n  text-align: right;\\n}\\n\\n.comment-list {\\n  margin: 15px;\\n}\\n\\n.image-comment-size {\\n  max-width: 200px;\\n  margin: 2px;\\n  border-radius: 0.5em;\\n  border-style: solid;\\n  border-color: black;\\n  border-width: 1px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jdW9uZ2RxL0lPTklDL20taW5vdmF0aW9uL2NsaWVudC9zcmMvYXBwL2NoYXRib3QvY2hhdC1ib3QvY2hhdC1ib3QucGFnZS5zY3NzIiwic3JjL2FwcC9jaGF0Ym90L2NoYXQtYm90L2NoYXQtYm90LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsTUFBQTtFQUNBLE9BQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0VBQ0EsZUFBQTtBQ0NKOztBREVBO0VBQ0ksa0JBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtBQ0NKOztBREdBO0VBQ0ksV0FBQTtFQUNBLG9CQUFBO0FDQUo7O0FER0E7RUFFSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtFQUNBLGlCQUFBO0VBQ0EsMkNBQUE7QUNESjs7QURLQTtFQUNJLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7RUFDQSxpQkFBQTtFQUNBLDJDQUFBO0FDRko7O0FES0E7RUFDSSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxPQUFBO0VBQ0EsU0FBQTtFQUNBLGVBQUE7QUNGSjs7QURLQTtFQUNJLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0EsY0FBQTtBQ0ZKOztBREtBO0VBQ0ksaUJBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0EsV0FBQTtFQUNBLGlCQUFBO0FDRko7O0FETUE7RUFDSSxZQUFBO0FDSEo7O0FETUE7RUFDSSxnQkFBQTtFQUNBLFdBQUE7RUFDQSxvQkFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtBQ0hKIiwiZmlsZSI6InNyYy9hcHAvY2hhdGJvdC9jaGF0LWJvdC9jaGF0LWJvdC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZmlsZS1vdmVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgei1pbmRleDogMjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgb3BhY2l0eTogMDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5pZGVhLWNyZWF0ZWR7XG4gICAgYm9yZGVyLXJhZGl1czogMmVtO1xuICAgIG9wYWNpdHk6IDAuOTtcbiAgICBtYXJnaW46IDVweDtcbiAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgIGJvcmRlci1jb2xvcjogZ3JheTtcbiAgICBib3JkZXItd2lkdGg6IDFweDtcbn1cblxuXG4uYmFja2dyb3VuZC1pdGVtLXJvdW5kIHtcbiAgICBtYXJnaW46IDNweDtcbiAgICBib3JkZXItcmFkaXVzOiAxLjVlbTtcbn1cblxuLmlucHV0LWNvbW1lbnR7XG4gICAgLy8gcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGJvcmRlci1yYWRpdXM6IDJlbTtcbiAgICBvcGFjaXR5OiAwLjk7XG4gICAgbWFyZ2luOiAxNXB4O1xuICAgIGJvcmRlci1zdHlsZTogc29saWQ7XG4gICAgYm9yZGVyLWNvbG9yOiBncmVlbjtcbiAgICBib3JkZXItd2lkdGg6IDFweDtcbiAgICBib3gtc2hhZG93OiAwcHggM3B4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpO1xufVxuXG4vLyBLaOG7kWkgZOG6oXkgaOG7jWMgY2hvIG3DoXlcbi5pbnB1dC10cmFpbntcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgYm9yZGVyLXJhZGl1czogMmVtO1xuICAgIG9wYWNpdHk6IDAuOTtcbiAgICBtYXJnaW46IDE1cHg7XG4gICAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgICBib3JkZXItY29sb3I6IHJlZDtcbiAgICBib3JkZXItd2lkdGg6IDFweDtcbiAgICBib3gtc2hhZG93OiAwcHggM3B4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpO1xufVxuXG4uaW5wdXQtdHJhaW4gLmNsb3NlLWJ1dHRvbntcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogOTk7XG4gICAgdG9wOiAwJTtcbiAgICBsZWZ0OiA5MCU7XG4gICAgZm9udC1zaXplOiA0NXB4O1xufVxuXG4uYm90LWJhY2tnb3VuZHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgIG1pbi13aWR0aDogMTBweDtcbiAgICBib3JkZXItcmFkaXVzOiAxZW07XG4gICAgb3BhY2l0eTogMC45O1xuICAgIHBhZGRpbmc6IDhweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTVFNEU5O1xuICAgIGNvbG9yOiAjMzYzNjM2O1xufVxuXG4udXNlci1iYWNrZ291bmR7XG4gICAgbWFyZ2luLWxlZnQ6IDQwcHg7XG4gICAgbWluLXdpZHRoOiAxMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgICBvcGFjaXR5OiAwLjc7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMyMDk1RkU7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG59XG5cblxuLmNvbW1lbnQtbGlzdHtcbiAgICBtYXJnaW46IDE1cHg7XG59XG5cbi5pbWFnZS1jb21tZW50LXNpemV7XG4gICAgbWF4LXdpZHRoOiAyMDBweDtcbiAgICBtYXJnaW46IDJweDtcbiAgICBib3JkZXItcmFkaXVzOiAwLjVlbTtcbiAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgIGJvcmRlci1jb2xvcjpibGFjaztcbiAgICBib3JkZXItd2lkdGg6IDFweDtcbn0iLCIuZmlsZS1vdmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHotaW5kZXg6IDI7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG9wYWNpdHk6IDA7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLmlkZWEtY3JlYXRlZCB7XG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcbiAgb3BhY2l0eTogMC45O1xuICBtYXJnaW46IDVweDtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiBncmF5O1xuICBib3JkZXItd2lkdGg6IDFweDtcbn1cblxuLmJhY2tncm91bmQtaXRlbS1yb3VuZCB7XG4gIG1hcmdpbjogM3B4O1xuICBib3JkZXItcmFkaXVzOiAxLjVlbTtcbn1cblxuLmlucHV0LWNvbW1lbnQge1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIG9wYWNpdHk6IDAuOTtcbiAgbWFyZ2luOiAxNXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IGdyZWVuO1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgYm94LXNoYWRvdzogMHB4IDNweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC41KTtcbn1cblxuLmlucHV0LXRyYWluIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiAyZW07XG4gIG9wYWNpdHk6IDAuOTtcbiAgbWFyZ2luOiAxNXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBib3JkZXItY29sb3I6IHJlZDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gIGJveC1zaGFkb3c6IDBweCAzcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuNSk7XG59XG5cbi5pbnB1dC10cmFpbiAuY2xvc2UtYnV0dG9uIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiA5OTtcbiAgdG9wOiAwJTtcbiAgbGVmdDogOTAlO1xuICBmb250LXNpemU6IDQ1cHg7XG59XG5cbi5ib3QtYmFja2dvdW5kIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gIG1pbi13aWR0aDogMTBweDtcbiAgYm9yZGVyLXJhZGl1czogMWVtO1xuICBvcGFjaXR5OiAwLjk7XG4gIHBhZGRpbmc6IDhweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0U1RTRFOTtcbiAgY29sb3I6ICMzNjM2MzY7XG59XG5cbi51c2VyLWJhY2tnb3VuZCB7XG4gIG1hcmdpbi1sZWZ0OiA0MHB4O1xuICBtaW4td2lkdGg6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgb3BhY2l0eTogMC43O1xuICBwYWRkaW5nOiA4cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICMyMDk1RkU7XG4gIGNvbG9yOiAjZmZmO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuLmNvbW1lbnQtbGlzdCB7XG4gIG1hcmdpbjogMTVweDtcbn1cblxuLmltYWdlLWNvbW1lbnQtc2l6ZSB7XG4gIG1heC13aWR0aDogMjAwcHg7XG4gIG1hcmdpbjogMnB4O1xuICBib3JkZXItcmFkaXVzOiAwLjVlbTtcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLWNvbG9yOiBibGFjaztcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AuthService, CommonsService, PopoverCardComponent, DynamicFormMobilePage } from 'ngxi4-dynamic-service';\nimport { MainService } from 'src/app/services/main.service';\n\n@Component({\n  selector: 'app-chat-bot',\n  templateUrl: './chat-bot.page.html',\n  styleUrls: ['./chat-bot.page.scss'],\n})\nexport class ChatBotPage implements OnInit {\n\n  chatbot: any = {\n    avatar: \"assets/imgs/avatar-ai.jpg\",\n    username: \"AI-NLP-Mobifone-C3\",\n    fullname: \"Tôi là máy học, tôi đang ở độ tuổi đi học, bạn hãy dạy cho tôi học nhé!\",\n    created_time: Date.now()\n  };\n\n  userInfo: any;\n  message: string;\n\n  conversion: any = {};\n\n  conversations = [];\n\n  isRepairing: boolean = false;\n  answer: string;\n\n  constructor(\n    private route: ActivatedRoute\n    , private apiCommons: CommonsService\n    , private apiAuth: AuthService\n    , private mainService: MainService\n  ) { }\n\n  ngOnInit() {\n    this.init();\n\n    this.route.queryParams.subscribe(item => {\n      this.refresh(item)\n    });\n  }\n\n  // đọc dữ liệu user\n  init() {\n    this.userInfo = this.mainService.getUserInfo();\n  }\n\n  // làm mới trang\n  refresh(item) {\n    this.apiAuth.postDynamicJson(this.apiAuth.serviceUrls.SOCKET_SERVER + '/request-answer'\n      , {\n        message: 'Xin chào'\n      }\n      , true)\n      .then(answer => {\n        if (answer && answer.status === \"OK\") {\n          // ban đầu máy sẽ tự động trả lời theo câu chào hỏi ban đầu\n          this.conversations.unshift({\n            response: answer.message,\n            created_time: Date.now()\n          })\n        }\n      })\n      .catch(err => console.log('Lỗi lấy chi tiết', err))\n  }\n\n  // Gửi nội dung comment đi bằng nút bấm\n  onClickSend() {\n    if (this.message) {\n      this.message = this.message.replace(/\\r?\\n|\\r/g, '')\n      if (this.message.length > 0) {\n        // khai báo bản ghi người hỏi\n        this.conversion = {\n          request: this.message,\n          created_time: Date.now()\n        }\n        this.apiAuth.postDynamicJson(this.apiAuth.serviceUrls.SOCKET_SERVER + '/request-answer'\n          , {\n            message: this.message\n          }\n          , true)\n          .then(answer => {\n            if (answer && answer.status === \"OK\") {\n              // ghi nhận bảng ghi máy trả lời\n              this.conversations.unshift({\n                request: this.conversion.request,\n                response: answer.message,\n                created_time: this.conversion.created_time\n              })\n              // muốn sửa câu trả lời thì sửa ngay cái đối tượng này\n              // thì gán đối tượng đàm thoại bằng bảng ghi cuối cùng để sửa\n              this.conversion = this.conversations[0]\n            }\n            this.message = ''\n          })\n          .catch(err => {\n            console.log(err);\n            this.message = ''\n          })\n        this.message = ''\n      }\n    }\n  }\n\n  // khi bấm enter để gửi lệnh\n  keyInput() {\n    this.onClickSend();\n  }\n\n  // bấm vào menu\n  onClickMore(evt) {\n\n    const allMenu = [\n      //  chỉ cho admin 98,99 và user_id của ý tưởng trùng với nó\n      // Cho tất cả mọi người trừ userInfo==idea\n      {\n        id: 1\n        , name: \"Giảng bài cho máy\"\n        , value: \"EDIT-INTENT\"\n        , icon: {\n          name: \"create\"\n          , color: \"success\"\n        }\n      }\n      ,\n      {\n        id: 2\n        , name: \"Kiểm tra độ chính xác\"\n        , value: \"VIEW-PROB\"\n        , icon: {\n          name: \"checkmark-circle\"\n          , color: \"secondary\"\n        }\n      },\n      {\n        id: 3\n        , name: \"Huấn luyện cho máy\"\n        , value: \"TRAIN\"\n        , icon: {\n          name: \"microphone\"\n          , color: \"warning\"\n        }\n      }\n    ]\n\n    // Nếu user không login thì không cho chạy huấn luyện\n    if (!this.userInfo) {\n      allMenu.splice(2, 1)\n    }\n\n    if (!this.conversion || !this.conversion.request) {\n      allMenu.splice(1, 1)\n    }\n\n\n    this.apiCommons.presentPopover(\n      evt\n      , PopoverCardComponent\n      , {\n        type: 'single-choice',\n        title: \"Tác vụ\",\n        color: \"primary\",\n        menu: allMenu\n      })\n      .then(data => {\n        this.processDetails(data);\n      })\n      .catch(err => {\n        // console.log('err: ', err);\n      });\n  }\n\n  // Thực thi lệnh của end user chọn menu setting\n  processDetails(itemOrItems: any) {\n    let cmd = itemOrItems.value;\n    // thực hiện gọi hàm huấn luyện\n    // kết quả huấn luyện thành công sẽ mở cửa sổ alert\n    if (cmd === 'TRAIN') {\n      // kiểm tra user đã đánh giá hay chưa\n      this.apiCommons.showLoader('Đang huấn luyện cho máy vui lòng đợi...')\n      this.apiAuth.postDynamicJson(this.apiAuth.serviceUrls.SOCKET_SERVER + \"/run-train\"\n        , { command: 'run-train' }, true)\n        .then(result => {\n          this.apiCommons.hideLoader()\n          this.apiCommons.showToast(result && result.message ? result.message : 'Đã huấn luyện thành công, bạn có thể test thử nhé', 2000, 'success')\n        })\n        .catch(err => {\n          // console.log('err', err);\n          this.apiCommons.hideLoader()\n          this.apiCommons.showToast(err && err.message ? err.message : 'Lỗi huấn luyện cho máy', 3000, 'danger')\n        })\n    }\n\n    // truy vấn xác suất của câu hỏi vừa mới đưa lên\n    // kết quả trả về hiển thị lên màn hình popup\n    if (cmd === 'VIEW-PROB') {\n      this.checkProbRequest()\n    }\n\n    // mở trang intent câu hỏi và câu trả lời\n    if (cmd === 'EDIT-INTENT') {\n\n    }\n\n  }\n\n  // sửa câu trả lời\n  // thì hiển thị câu trả lời ngay ở dưới ô\n  onClickRepair() {\n    if (this.isRepairing && (!this.conversion.response || !this.conversion.intent_name)) {\n      // yêu cầu nhập đủ ý định và đáp ứng mới cho lưu được\n      this.conversion.invalid = true;\n      return;\n    }\n\n    // nếu yêu cầu lưu trữ thông tin đã chỉnh sửa\n    if (this.isRepairing && this.conversion.request && this.conversion.response && this.conversion.intent_name) {\n      // console.log(this.conversion);\n      // các thông tin đã đầy đủ thì post lên máy chủ và trả kết quả về\n      this.apiAuth.postDynamicJson(this.apiAuth.serviceUrls.SOCKET_SERVER + \"/train-answer\"\n        , {\n          request: this.conversion.request,\n          response: this.conversion.response,\n          intent_name: this.conversion.intent_name\n        }, true)\n        .then(result => {\n          // console.log('data', result);\n          this.apiCommons.showToast(result && result.message ? result.message : 'Soạn bài giảng cho máy thành công', 2000, 'success')\n        })\n        .catch(err => {\n          // console.log('err', err);\n          this.apiCommons.showToast(err && err.message ? err.message : 'Lỗi soạn bài giảng cho máy', 3000, 'danger')\n        })\n    }\n    this.isRepairing = !this.isRepairing;\n  }\n\n\n  // Đóng cửa sổ huấn luyện\n  onClickClose() {\n    this.isRepairing = false;\n  }\n\n\n  /**\n   * Gửi lệnh lênh máy chủ thông tin yêu cầu, máy chủ trả về 3 chuỗi xác suất nhé\n   */\n  checkProbRequest() {\n\n    this.apiAuth.getDynamicUrl(this.apiAuth.serviceUrls.SOCKET_SERVER + \"/get-predict?message=\" + this.conversion.request, true)\n      .then(results => {\n        this.showResultCheck(results);\n      })\n      .catch(err => {\n        this.apiCommons.showToast(err && err.message ? err.message : 'Lỗi kiểm tra xác suất', 3000, 'danger')\n      })\n  }\n\n\n  showResultCheck(results) {\n\n    let details: any = {\n      type: \"details\",\n      details: []\n    }\n\n    let title = \"Câu nói: \";\n\n    for (let idx = 0; idx < results.length; idx++) {\n      let el = results[idx];\n      if (idx === 0) title += el.text;\n      details.details.push({\n        name: (el.intent && el.intent.name ? el.intent.id + \"# \" + el.intent.name : el.label),\n        value: (el.value * 100).toFixed(2) + \"%\"\n      })\n    }\n\n    let form = {\n      title: 'Hệ thống tìm thấy'\n      , buttons: [\n        { color: 'danger', icon: 'close', next: 'CLOSE' }\n      ]\n      , items: [\n        { type: 'title', name: title }\n        , details\n      ]\n    }\n\n    // call popup window for form login\n    this.apiCommons.openModal(DynamicFormMobilePage,\n      {\n        parent: this,\n        callback: this.callbackProcess,\n        form: form\n      }\n    );\n\n  }\n\n  /**\n   * Hàm gọi lại\n   */\n  callbackProcess = function (res) {\n    return new Promise<any>((resolve, reject) => {\n      if (res.error) {\n        this.apiCommons.presentAlert('Error:<br>' + (res.error.message != undefined ? res.error.message : res.message ? res.message : (\"Error Unknow: \" + JSON.stringify(res.error, null, 2))));\n      }\n      resolve({ next: \"CLOSE\" });\n    });\n  }.bind(this);\n\n}\n"],"sourceRoot":"webpack:///"}